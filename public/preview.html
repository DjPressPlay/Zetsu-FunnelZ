<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zetsu Infinity — Funnel Preview</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family: 'Poppins', sans-serif; background: #111; color: #fff; line-height:1.5; overflow-x:hidden; }
  .topbar { display:flex; justify-content:space-between; align-items:center; padding:15px 30px; background:#000; border-bottom:2px solid #fff; color:#00ffe1; font-weight:600; font-size:16px; }
  .topbar-title { font-weight:700; font-size:1.2rem; background:linear-gradient(90deg,#2fffda,#00d4ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
  .topbar-nav { display:flex; gap:30px; }
  .topbar-nav a { color:#00ffe1; text-decoration:none; transition:.2s; }
  .topbar-nav a:hover { opacity:.7; }
  main { padding:4rem 2rem; max-width:1100px; margin:0 auto; }
  .container { max-width:900px; margin:0 auto; background:#151515; border-radius:20px; overflow:hidden; border:1px solid rgba(255,255,255,.06); box-shadow:0 10px 30px rgba(0,0,0,.3); }
  .funnel-header { text-align:center; padding:60px 20px; background:linear-gradient(135deg,#2fffda,#00d4ff); color:#000; }
  .funnel-header h1 { font-size:42px; margin-bottom:10px; font-weight:700; }
  .funnel-header p { font-size:18px; margin-top:10px; color:#0a0a0a; }
  .product-image { max-width:100%; border-radius:16px; margin:25px 0; border:2px solid rgba(0,255,225,.3); }
  section { padding:40px 30px; border-bottom:1px solid rgba(255,255,255,.06); }
  section:last-child { border-bottom:none; }
  h2 { font-size:28px; color:#00ffe1; margin-bottom:15px; text-align:center; }
  p { font-size:17px; line-height:1.6; text-align:center; margin-bottom:20px; color:#ccc; }
  .cta { display:inline-block; padding:15px 35px; background:linear-gradient(90deg,#00ffe1,#00a2ff); color:#000; font-weight:bold; text-decoration:none; border-radius:50px; font-size:18px; transition:.2s; box-shadow:0 0 20px rgba(0,255,221,.3); border:none; cursor:pointer; }
  .cta:hover { transform:translateY(-2px); box-shadow:0 0 30px rgba(0,255,221,.6); }
  .price { font-size:24px; font-weight:bold; margin-top:20px; color:#00ffe1; }
  .testimonials,.videos,.secret-cards { display:flex; justify-content:center; gap:25px; flex-wrap:wrap; margin-top:25px; }
  .testimonial,.video,.secret-card { flex:1; min-width:280px; background:rgba(0,0,0,0.4); padding:20px; border-radius:10px; border:1px solid rgba(0,255,225,0.2); box-shadow:0 4px 10px rgba(0,255,225,0.1); transition:.3s; }
  .testimonial:hover,.video:hover,.secret-card:hover { transform:translateY(-5px); border-color:rgba(0,255,225,0.4); box-shadow:0 8px 20px rgba(0,255,225,0.3); }
  .testimonial img { max-width:100%; border-radius:8px; }
  iframe { width:100%; height:240px; border-radius:10px; }
  .secret-header { color:#00ffe1; font-size:14px; font-weight:700; text-transform:uppercase; letter-spacing:1px; margin-bottom:15px; text-align:center; }
  .secret-body { color:#ccc; font-size:16px; line-height:1.5; text-align:center; }
  .community-section,.offer-section { text-align:center; padding:80px 20px; background:rgba(0,0,0,0.3); }
  .community-buttons,.action-buttons { display:flex; justify-content:center; gap:15px; flex-wrap:wrap; margin-top:30px; }
  .community-buttons a { background:#151515; color:#00ffe1; padding:12px 26px; border-radius:8px; text-decoration:none; font-weight:600; border:1px solid rgba(0,255,225,.3); transition:.3s; }
  .community-buttons a:hover { background:rgba(0,255,225,0.1); border-color:#00ffe1; transform:translateY(-2px); }
  #edit-btn { background:rgba(0,255,225,0.1); color:#00ffe1; border:2px solid #00ffe1; padding:12px 30px; border-radius:8px; cursor:pointer; font-weight:600; font-size:16px; transition:.3s; }
  #edit-btn:hover { background:rgba(0,255,225,0.2); transform:translateY(-2px); box-shadow:0 0 15px rgba(0,255,225,.6); }
  .no-funnel { text-align:center; padding:60px 20px; }
  .no-funnel h3 { color:#00ffe1; font-size:24px; margin-bottom:20px; }
  .no-funnel p { color:#aaa; margin-bottom:30px; }
  footer { text-align:center; padding:1rem; font-size:.75rem; color:#777; border-top:2px solid #fff; }
  footer a { color:#00ffe1; text-decoration:none; }
  footer a:hover { text-decoration:underline; }

  @media (max-width:600px) {
    .topbar { flex-direction:column; gap:1rem; font-size:.8rem; text-align:center; }
    .topbar-nav { flex-wrap:wrap; justify-content:center; }
    .funnel-header h1 { font-size:2rem; }
    .funnel-header p { font-size:1rem; }
    h2 { font-size:1.6rem; }
    .testimonial,.video,.secret-card { min-width:100%; }
    .secret-body { font-size:14px; }
  }
</style>
</head>
<body>

<div class="topbar">
  <h1 class="topbar-title">Funnel Preview</h1>
  <nav class="topbar-nav">
    <a href="index.html">Home</a>
    <a href="info.html">Info</a>
    <a href="builder.html">Builder</a>
    <a href="preview.html">Preview</a>
    <a href="affiliate.html">Affiliate</a>
  </nav>
</div>

<main>
  <div id="preview-content"></div>
</main>

<footer>
  <p>© 2025 Zetsumetsu Corporation™ | All systems, products, and materials are the property of Zetsumetsu Corporation. Unauthorized use or reproduction is prohibited. | Zetsumetsu EOe™ | Artworqq Kevin Suber |
  <br> <a href="https://sporez.netlify.app/" target="_blank">Spore'z Network</a> | <a href="#">SignalZ</a> | <a href="#">Z-Auth</a></p>
</footer>

<script>
const previewContent = document.getElementById('preview-content');
const savedData = localStorage.getItem('funnelData');

function extractVideoId(url) {
  if (!url) return null;
  const match = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\s]+)/);
  return match ? match[1] : null;
}

function isImageUrl(url) {
  return /\.(jpg|jpeg|png|gif|webp|svg)(\?.*)?$/i.test(url);
}

function isVideoUrl(url) {
  return /\.(mp4|webm|ogg)(\?.*)?$/i.test(url);
}

function renderMedia(url) {
  const videoId = extractVideoId(url);
  if (videoId) return `<iframe src="https://www.youtube.com/embed/${videoId}" frameborder="0" allowfullscreen></iframe>`;
  if (isImageUrl(url)) return `<img src="${url}" alt="Media Preview">`;
  if (isVideoUrl(url)) return `<video controls src="${url}" style="max-width:100%;border-radius:8px;"></video>`;
  return `<div style="color:#00ffe1;padding:20px;">Media: ${url}</div>`;
}

function renderPreview() {
  if (!savedData) return showNoFunnel();
  const data = JSON.parse(savedData);

  let testimonialsHTML = '';
  (data.testimonials || []).forEach(t => {
    if (t.media || t.description) {
      testimonialsHTML += `
        <div class="testimonial">
          ${t.media ? renderMedia(t.media) : ''}
          ${t.description ? `<p>"${t.description}"</p>` : ''}
        </div>`;
    }
  });

  let secretsHTML = '';
  (data.secrets || []).forEach(s => {
    secretsHTML += `
      <div class="secret-card">
        <div class="secret-header">${s.header || ''}</div>
        <div class="secret-body">${s.body || ''}</div>
      </div>`;
  });

  let tutorialsHTML = '';
  (data.tutorials || []).forEach(t => {
    if (t.media || t.title || t.description) {
      tutorialsHTML += `
        <div class="video">
          ${t.media ? renderMedia(t.media) : ''}
          ${t.title ? `<h3 style="color: #00ffe1; margin-top: 15px; text-align: center;">${t.title}</h3>` : ''}
          ${t.description ? `<p style="font-size: 15px;">${t.description}</p>` : ''}
        </div>`;
    }
  });

  const productImageHTML = data.productImage ? `<img src="${data.productImage}" class="product-image" alt="Product Image">` : '';

  const adVideoHTML = data.adVideo ? renderMedia(data.adVideo) : '';

  previewContent.innerHTML = `
  <div class="container">
    <div class="funnel-header">
      <h1>${data.productName || 'Your Product Name'}</h1>
      <p>${data.productDescription || 'Power your workflow with this amazing solution'}</p>
      ${productImageHTML}
      ${adVideoHTML}
      ${data.signupLink ? `<a href="${data.signupLink}" class="cta" target="_blank">Get Started Now</a>` : '<a href="#" class="cta">Get Started Now</a>'}
      <p class="price">${data.price || '$99 • Lifetime Access'}</p>
    </div>

    <section>
      <h2>What is ${data.productName || 'This Product'}?</h2>
      <p>${data.productDescription || 'An innovative solution designed for creators, developers, and digital professionals.'}</p>
    </section>

    ${testimonialsHTML ? `<section><h2>Customer Testimonials</h2><div class="testimonials">${testimonialsHTML}</div></section>` : ''}
    ${secretsHTML ? `<section class="secrets"><h2>You'll Find Out...</h2><div class="secret-cards">${secretsHTML}</div></section>` : ''}
    ${tutorialsHTML ? `<section><h2>Watch How It Works</h2><div class="videos">${tutorialsHTML}</div></section>` : ''}

    <section class="community-section">
      <h2>Join the Community</h2>
      ${data.communityImage ? `<img src="${data.communityImage}" alt="Community Image">` : ''}
      <p>${data.bonusConfirmation || 'Book a live session, join our community, or catch our next stream to see this product in action.'}</p>
      <div class="community-buttons">
        ${(data.scheduleCall ? `<a href="${data.scheduleCall}" target="_blank">Schedule a Call</a>` : '')}
        ${(data.livestreamEvent ? `<a href="${data.livestreamEvent}" target="_blank">Join Live Stream</a>` : '')}
      </div>
    </section>

    <section class="offer-section">
      <h2>Limited-Time Offer</h2>
      ${data.offerImage ? `<img src="${data.offerImage}" alt="Offer Image">` : ''}
      <p>${data.offerText || 'Get started today and unlock exclusive bonuses, premium support, and lifetime access.'}</p>
      ${data.signupLink ? `<a href="${data.signupLink}" target="_blank">Claim Your Offer</a>` : '<a href="#">Claim Your Offer</a>'}
    </section>
  </div>

  <div class="action-buttons">
    <button id="edit-btn">Edit Funnel</button>
  </div>
  `;

  document.getElementById('edit-btn').addEventListener('click', () => window.location.href='builder.html');
}

function showNoFunnel() {
  previewContent.innerHTML = `
    <div class="no-funnel">
      <h3>No Funnel Found</h3>
      <p>You haven't created a funnel yet. Head to the builder to get started!</p>
      <button id="go-builder-btn" style="background: linear-gradient(90deg, #00ffe1, #00a2ff); color:#000; border:2px solid #00ffe1; padding:15px 30px; font-size:16px; font-weight:600; border-radius:50px; cursor:pointer;">Go to Builder</button>
    </div>`;
  document.getElementById('go-builder-btn').addEventListener('click', () => window.location.href='builder.html');
}

renderPreview();
</script>
</body>
</html>
